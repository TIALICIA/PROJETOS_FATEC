BANCO DE DADOS - 22.08.2025

   CREATE TABLE tipo_evento (
      id_tipo_evento SERIAL PRIMARY KEY,
      nome VARCHAR(100) NOT NULL,
      descricao TEXT
   );

    CREATE TABLE estado (
      sigla_estado CHAR(2) PRIMARY KEY,
      nome_estado VARCHAR(100) NOT NULL
  );

   CREATE TABLE localizacao (
      id_localizacao SERIAL PRIMARY KEY,
      latitude NUMERIC(9,6) NOT NULL,
      longitude NUMERIC(9,6) NOT NULL,
      cidade VARCHAR(100) NOT NULL,
      sigla_estado CHAR(2) NOT NULL REFERENCES,
      estado(sigla_estado)
   );
 
   CREATE TABLE usuario (
      id_usuario SERIAL PRIMARY KEY,
      nome VARCHAR(150) NOT NULL,
      email VARCHAR(150) UNIQUE NOT NULL,
      senha_hash VARCHAR(255) NOT NULL
   );

   CREATE TABLE telefone (
      id_telefone SERIAL PRIMARY KEY,
      numero VARCHAR(20) NOT NULL,
      id_usuario INT NOT NULL REFERENCES usuario(id_usuario)
   );

   CREATE TABLE evento (
      id_evento SERIAL PRIMARY KEY,
      titulo VARCHAR(150) NOT NULL,
      descricao TEXT,
      data_hora TIMESTAMP NOT NULL,
      status VARCHAR(30) CHECK (status IN ('Ativo','Em Monitoramento','Resolvido')),
      id_tipo_evento INT NOT NULL REFERENCES tipo_evento(id_tipo_evento),
      id_localizacao INT NOT NULL REFERENCES localizacao(id_localizacao)
   );

  CREATE TABLE relato (
      id_relato SERIAL PRIMARY KEY,
      texto TEXT NOT NULL,
      data_hora TIMESTAMP NOT NULL,
      id_evento INT NOT NULL REFERENCES
      evento(id_evento),
      id_usuario INT NOT NULL REFERENCES
      usuario(id_usuario)
   );

   CREATE TABLE alerta (
      id_alerta SERIAL PRIMARY KEY,
      mensagem TEXT NOT NULL,
      data_hora TIMESTAMP NOT NULL,
      nivel VARCHAR(20) CHECK (nivel IN
      ('Baixo','Médio','Alto','Crítico')),
      id_evento INT NOT NULL REFERENCES
      evento(id_evento)
   );

-- Inserindo tipos de evento
INSERT INTO tipo_evento (nome, descricao) VALUES
('Enchente', 'Inundação causada por excesso de chuvas'),
('Incêndio Florestal', 'Fogo em vegetação natural'),
('Tempestade', 'Fenômeno com ventos fortes e raios');
 
-- Inserindo estados
INSERT INTO estado (sigla_estado, nome_estado) VALUES
('SP', 'São Paulo'),
('RJ', 'Rio de Janeiro'),
('MG', 'Minas Gerais');
 
-- Inserindo localizações
INSERT INTO localizacao (latitude, longitude, cidade, sigla_estado) VALUES
(-23.550520, -46.633308, 'São Paulo', 'SP'),
(-22.906847, -43.172896, 'Rio de Janeiro', 'RJ'),
(-19.916681, -43.934493, 'Belo Horizonte', 'MG');
 
-- Inserindo usuários
INSERT INTO usuario (nome, email, senha_hash) VALUES
('João Silva', 'joao@gmail.com', 'senha123hash'),
('Maria Oliveira', 'maria@gmail.com', 'senha456hash'),
('Carlos Souza', 'carlos@gmail.com', 'senha789hash');
 
-- Inserindo eventos
INSERT INTO evento (titulo, descricao, data_hora, status, id_tipo_evento, id_localizacao) VALUES
('Enchente na Zona Sul', 'Ruas alagadas após chuvas intensas', '2025-08-20 14:30:00', 'Ativo', 1, 1),
('Incêndio na Serra', 'Grande foco de incêndio em área de mata', '2025-08-18 10:00:00', 'Em Monitoramento', 2, 2),
('Tempestade com ventos fortes', 'Rajadas atingiram 100km/h', '2025-08-15 20:00:00', 'Resolvido', 3, 3);
 
 
-- Selecionar todos os tipos de eventos
SELECT * FROM tipo_evento;
 
-- Selecionar todos os usuários
SELECT * FROM usuario;
 
 
-- Buscar eventos com status 'Ativo'
SELECT * FROM evento
WHERE status = 'Ativo';
 
-- Buscar usuários com nome que começa com 'M'
SELECT * FROM usuario
WHERE nome LIKE 'M%';
